(function(){"use strict";var e={2951:function(e,t,n){var o=n(9242),r=n(3396);function a(e,t,n,o,a,i){const u=(0,r.up)("Message"),s=(0,r.up)("DynamicDialog"),l=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(u),(0,r.Wm)(s),(0,r.Wm)(l)],64)}function i(e,t,n,o,a,i){const u=(0,r.up)("Toast");return(0,r.wg)(),(0,r.j4)(u)}var u={mounted(){this.$ws.addEventListener("message",(e=>{let t=JSON.parse(e.data);switch(t.action){case"error":return this.$toast.add({severity:"error",summary:"Fehler!",detail:t.data,life:6e3})}}))}},s=n(89);const l=(0,s.Z)(u,[["render",i]]);var d=l,c={name:"App",components:{Message:d},mounted(){this.$ws.addEventListener("open",(()=>{this.$ws["up"]=e=>{this.$ws.send(JSON.stringify(e))},this.$ws.addEventListener("message",(e=>{let t=JSON.parse(e.data);["error"].includes(t.action)||this.$store.commit("getData",t)}))}))}};const m=(0,s.Z)(c,[["render",a]]);var p=m,v=n(2483);function h(e,t,n,o,a,i){const u=(0,r.up)("setup"),s=(0,r.up)("game");return e.$store.state.user.username&&e.$store.state.user.room?((0,r.wg)(),(0,r.j4)(s,{key:1})):((0,r.wg)(),(0,r.j4)(u,{key:0}))}var f=n(7139),b=n.p+"img/logo.a48d51a5.png";const w=e=>((0,r.dD)("data-v-dcde6290"),e=e(),(0,r.Cn)(),e),g=w((()=>(0,r._)("img",{alt:"TK-Yatzy",src:b},null,-1))),y=["textContent"];function _(e,t,n,o,a,i){const u=(0,r.up)("enter-name"),s=(0,r.up)("enter-room"),l=(0,r.up)("Button"),d=(0,r.up)("Card");return(0,r.wg)(),(0,r.j4)(d,{class:"card"},{header:(0,r.w5)((()=>[g])),title:(0,r.w5)((()=>[(0,r._)("strong",{textContent:(0,f.zw)(i.welcomeText)},null,8,y)])),content:(0,r.w5)((()=>[e.$store.state.user.username?e.$store.state.user.room?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(s,{key:1,onData:t[1]||(t[1]=e=>a.data=e),onEnter:i.handleNext},null,8,["onEnter"])):((0,r.wg)(),(0,r.j4)(u,{key:0,onData:t[0]||(t[0]=e=>a.data=e),onEnter:i.handleNext},null,8,["onEnter"]))])),footer:(0,r.w5)((()=>[(0,r.Wm)(l,{icon:"pi pi-check",label:"Weiter",onClick:i.handleNext},null,8,["onClick"]),(0,r.Wm)(l,{icon:"pi pi-times",label:"Abbrechen",class:"p-button-secondary",style:{float:"right"}})])),_:1})}const D={class:"p-float-label"},C=(0,r._)("label",{for:"username"},"Benutzername",-1);function k(e,t,n,a,i,u){const s=(0,r.up)("InputText");return(0,r.wg)(),(0,r.iD)("span",D,[(0,r.Wm)(s,{id:"username",type:"text",style:{width:"100%"},modelValue:i.username,"onUpdate:modelValue":t[0]||(t[0]=e=>i.username=e),onKeyup:t[1]||(t[1]=(0,o.D2)((t=>e.$emit("enter")),["enter"]))},null,8,["modelValue"]),C])}var $={data(){return{username:""}},watch:{username(){this.$emit("data",this.username)}}};const x=(0,s.Z)($,[["render",k]]);var R=x;const j=e=>((0,r.dD)("data-v-1b099f5e"),e=e(),(0,r.Cn)(),e),O=j((()=>(0,r._)("strong",{class:"headline"},"Raum beitreten",-1))),T={class:"p-fluid code"},z=j((()=>(0,r._)("br",null,null,-1))),Z={style:{"text-align":"center"}},S=(0,r.Uk)("Raum erstellen");function I(e,t,n,o,a,i){const u=(0,r.up)("InputNumber"),s=(0,r.up)("Button");return(0,r.wg)(),(0,r.iD)(r.HY,null,[O,(0,r._)("div",T,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(6,(e=>(0,r._)("div",{key:e},[(0,r.Wm)(u,{modelValue:a.numbers[e],"onUpdate:modelValue":t=>a.numbers[e]=t,mode:"decimal",inputId:`code-${e}`,inputStyle:"text-align: center;",inputProps:{autofocus:1==e,inputmode:"decimal"},min:0,max:9,onKeyup:t=>i.nextInput(t,e)},null,8,["modelValue","onUpdate:modelValue","inputId","inputProps","onKeyup"])]))),64))]),z,(0,r._)("div",Z,[(0,r.Wm)(s,{class:"p-button-text",onClick:i.createRoom},{default:(0,r.w5)((()=>[S])),_:1},8,["onClick"])])],64)}var P={data(){return{numbers:{1:null,2:null,3:null,4:null,5:null,6:null}}},computed:{number(){return Object.values(this.numbers).join("")}},methods:{nextInput(e,t){if(!e.target.value&&"Backspace"==e.key){let e=t-1;if(0==t)return;return this.numbers[e]=null,void document.getElementById(`code-${e}`).focus()}if(!e.target.value)return;if(!e.key.match(/[0-9]/))return;let n=t+1;n<=6&&document.getElementById(`code-${n}`).select(),6==t&&document.getElementById("code-1").select()},createRoom(){this.$ws.up({action:"createRoom",data:null})}},watch:{number(){this.$emit("data",this.number),6==this.number.length&&this.$emit("enter")}}};const W=(0,s.Z)(P,[["render",I],["__scopeId","data-v-1b099f5e"]]);var N=W,E={components:{enterName:R,enterRoom:N},data(){return{data:""}},computed:{welcomeText(){const e=this.$store.state.user.username;return`Herzlich Willkommen${e?" "+e:""}!`}},methods:{handleNext(){if(this.$store.state.user.username){if(!this.$store.state.user.room){if(6!=this.data.length)return;this.$ws.up({action:"setRoom",data:this.data})}}else this.$ws.up({action:"setUsername",data:this.data})}},watch:{"$store.state.data.setup"(e){this.$store.commit("updateUser",{key:e.key,value:e.value})}}};const H=(0,s.Z)(E,[["render",_],["__scopeId","data-v-dcde6290"]]);var U=H;const V=e=>((0,r.dD)("data-v-4d6da7f7"),e=e(),(0,r.Cn)(),e),B={class:"cubes"},Y={style:{"text-align":"center"}},K=V((()=>(0,r._)("br",null,null,-1))),F=V((()=>(0,r._)("br",null,null,-1)));function A(e,t,n,o,a,i){const u=(0,r.up)("sidebar"),s=(0,r.up)("yatzy-table"),l=(0,r.up)("cube"),d=(0,r.up)("Button");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(u),(0,r.Wm)(s,{roomData:a.roomData,model:a.model,onRole:a.onRole,onResetActivation:t[0]||(t[0]=e=>a.activeCubes=[])},null,8,["roomData","model","onRole"]),(0,r._)("div",B,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.countCubes,(e=>((0,r.wg)(),(0,r.j4)(l,{key:e,position:e,active:a.activeCubes.includes(e),onClick:t=>i.toggleCube(e)},null,8,["position","active","onClick"])))),128))]),(0,r._)("div",Y,[(0,r.Wm)(d,{disabled:!(a.roomData?.room?.activeUser==e.$store.state.user.id)||3==a.roomData.room.numberOfThrows||a.onRole,textContent:"Würfeln",onClick:i.roleTheCube},null,8,["disabled","onClick"]),K,F,e.$store.state.user?.id==a.roomData?.room?.presenter?((0,r.wg)(),(0,r.j4)(d,{key:0,textContent:"Neue Runde",onClick:i.newRound},null,8,["onClick"])):(0,r.kq)("",!0)])],64)}const M=(0,r._)("span",{style:{"font-size":"10px"}},"Raum-ID:",-1),q=(0,r._)("br",null,null,-1),J=(0,r._)("hr",null,null,-1);function L(e,t,n,o,a,i){const u=(0,r.up)("Button"),s=(0,r.up)("Toolbar"),l=(0,r.up)("Menu"),d=(0,r.up)("Sidebar",!0);return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(s,{style:{padding:"8px"}},{start:(0,r.w5)((()=>[(0,r.Wm)(u,{class:"p-button-rounded",icon:"pi pi-bars",iconPos:"left",onClick:t[0]||(t[0]=e=>a.opened=!0)})])),end:(0,r.w5)((()=>[(0,r._)("div",null,[M,q,(0,r._)("b",null,(0,f.zw)(e.$store.state.user.room),1)])])),_:1}),J,(0,r.Wm)(d,{visible:a.opened,"onUpdate:visible":t[1]||(t[1]=e=>a.opened=e)},{default:(0,r.w5)((()=>[(0,r._)("h2",null,"Hallo "+(0,f.zw)(e.$store.state.user.username)+"!",1),(0,r.Wm)(l,{model:a.items,style:{width:"100%"}},null,8,["model"])])),_:1},8,["visible"])],64)}var G={data(){return{opened:!1,items:[{label:"Raum verwalten",icon:"pi pi-cog",url:"#comming-soon"},{label:"Mein Profil",icon:"pi pi-user",url:"#comming-soon"},{label:"Raum verlassen",icon:"pi pi-sign-out",command:()=>{this.$store.state.user.room=null}}]}}};const Q=(0,s.Z)(G,[["render",L]]);var X=Q;const ee=e=>((0,r.dD)("data-v-a596c084"),e=e(),(0,r.Cn)(),e),te=ee((()=>(0,r._)("th",{style:{"min-width":"110px"}},null,-1))),ne=["active","textContent"],oe=ee((()=>(0,r._)("th",{style:{width:"100%"}},null,-1))),re=["textContent"],ae=ee((()=>(0,r._)("td",{style:{width:"100%"}},null,-1)));function ie(e,t,n,o,a,i){const u=(0,r.up)("yatzy-table-cell");return(0,r.wg)(),(0,r.iD)("table",null,[(0,r._)("thead",null,[(0,r._)("tr",null,[te,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.roomData.users,((e,t)=>((0,r.wg)(),(0,r.iD)("th",{key:t,active:e.id==n.roomData.room.activeUser,textContent:(0,f.zw)(e.username)},null,8,ne)))),128)),oe])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.model.fields,((o,a)=>((0,r.wg)(),(0,r.iD)("tr",{key:a},[(0,r._)("td",{style:(0,f.j5)(`min-width: 110px; ${o.style}`),textContent:(0,f.zw)(o.label)},null,12,re),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.roomData.users,((a,s)=>((0,r.wg)(),(0,r.j4)(u,{key:s,field:o,roomData:n.roomData,user:a,onRole:n.onRole,position:i.getPositionCount(a),onResetActivation:t[0]||(t[0]=t=>e.$emit("resetActivation"))},null,8,["field","roomData","user","onRole","position"])))),128)),ae])))),128))])])}const ue=["textContent"],se=["textContent"];function le(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("td",null,[(0,r._)("span",{style:(0,f.j5)(n.field.style),textContent:(0,f.zw)(n.field.output(n.field,n.roomData,n.user))},null,12,ue),!1!==i.tooltip?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,f.C_)("tooltip "+(n.position%2?"left":"right")),textContent:(0,f.zw)(i.tooltip),onClick:t[0]||(t[0]=(...e)=>i.setField&&i.setField(...e))},null,10,se)):(0,r.kq)("",!0),!1!==i.tooltip?((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,f.C_)("dreieck "+(n.position%2?"left":"right"))},null,2)):(0,r.kq)("",!0)])}var de={props:["field","roomData","position","user","onRole"],computed:{thrownNumbers(){let e=this.roomData.room.rounds;return e.length?Object.values(e[e.length-1].thrownNumbers):[]},tooltip(){let e=this.roomData.room.activeUser;if(!this.field.rule||!this.roomData.room.numberOfThrows||this.$store.state.user.id!=e||e!=this.user.id||this.onRole)return!1;if(this.roomData.room.rounds.some((e=>e.fieldId==this.field.id&&e.round==this.roomData.room.round&&e.user==this.user.id)))return!1;let t=this.field.rule(this.thrownNumbers,this.roomData,this);return!(!t&&(t||3!=this.roomData.room.numberOfThrows))&&t}},methods:{setField(){this.$ws.up({action:"setField",data:this.field.id}),this.$emit("resetActivation")}}};const ce=(0,s.Z)(de,[["render",le],["__scopeId","data-v-884cfa5c"]]);var me=ce;let pe=0;var ve={components:{yatzyTableCell:me},props:["roomData","model","onRole"],methods:{getPositionCount(e){return e.id!=this.roomData.room.activeUser?0:(pe++,pe)}}};const he=(0,s.Z)(ve,[["render",ie],["__scopeId","data-v-a596c084"]]);var fe=he;const be={class:"scene"},we=(0,r.uE)('<div class="cube__face cube__face--one" data-v-52246e6d><div data-v-52246e6d></div></div><div class="cube__face cube__face--six" data-v-52246e6d><div data-v-52246e6d></div><div data-v-52246e6d></div><div data-v-52246e6d></div><div data-v-52246e6d></div><div data-v-52246e6d></div><div data-v-52246e6d></div></div><div class="cube__face cube__face--three" data-v-52246e6d><div data-v-52246e6d></div><div data-v-52246e6d></div><div data-v-52246e6d></div></div><div class="cube__face cube__face--four" data-v-52246e6d><div data-v-52246e6d></div><div data-v-52246e6d></div><div data-v-52246e6d></div><div data-v-52246e6d></div></div><div class="cube__face cube__face--five" data-v-52246e6d><div data-v-52246e6d></div><div data-v-52246e6d></div><div data-v-52246e6d></div><div data-v-52246e6d></div><div data-v-52246e6d></div></div><div class="cube__face cube__face--two" data-v-52246e6d><div data-v-52246e6d></div><div data-v-52246e6d></div></div>',6),ge=[we];function ye(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",be,[(0,r._)("div",{class:(0,f.C_)(`cube ${a.cubeClass}`)},ge,2)])}var _e={props:["position"],data(){return{cubeDic:{1:"one",2:"two",3:"three",4:"four",5:"five",6:"six"},cubeClass:"show-one"}},watch:{async"$store.state.data.cube"(e){if(this.position in e){e=e[this.position];for(const n of Object.values(e))this.cubeClass=`show-${this.cubeDic[n]}`,await t(this.$cubeSpinTime)}function t(e){return new Promise((t=>setTimeout(t,e)))}}}};const De=(0,s.Z)(_e,[["render",ye],["__scopeId","data-v-52246e6d"]]);var Ce=De;function ke(e,t,n){let o=t.room.rounds.find((o=>o.user==n.id&&o.fieldId==e.id&&o.round==t.room.round));return o?o.fieldValue:""}function $e(e,t){let n=["einser","zweier","dreier","vierer","fünfer","sechser"];return e.room.rounds.filter((o=>o.user==t.id&&n.includes(o.fieldId)&&o.round==e.room.round))?.reduce(((e,t)=>e+t.fieldValue),0)||""}function xe(e,t){let n=["einPaar","zweiPaar","dreierpasch","viererpasch","fullHouse","kleineStraße","großeStraße","yatzy","chance"];return e.room.rounds.filter((o=>o.user==t.id&&n.includes(o.fieldId)&&o.round==e.room.round))?.reduce(((e,t)=>e+t.fieldValue),0)||""}function Re(e){let t={};for(let n=1;n<=6;n++)t[n]=e.filter((e=>e==n)).length;return t}var je={fields:[{id:"einser",label:"Einser",rule:e=>1*e.filter((e=>1==e)).length,output:(e,t,n)=>ke(e,t,n)},{id:"zweier",label:"Zweier",rule:e=>2*e.filter((e=>2==e)).length,output:(e,t,n)=>ke(e,t,n)},{id:"dreier",label:"Dreier",rule:e=>3*e.filter((e=>3==e)).length,output:(e,t,n)=>ke(e,t,n)},{id:"vierer",label:"Vierer",rule:e=>4*e.filter((e=>4==e)).length,output:(e,t,n)=>ke(e,t,n)},{id:"fünfer",label:"Fünfer",rule:e=>5*e.filter((e=>5==e)).length,output:(e,t,n)=>ke(e,t,n)},{id:"sechser",label:"Sechser",rule:e=>6*e.filter((e=>6==e)).length,output:(e,t,n)=>ke(e,t,n)},{id:"summe",label:"Summe",style:"font-weight: bold;",output:(e,t,n)=>$e(t,n)},{id:"bonus",label:"Bonus",style:"font-weight: bold;",output:(e,t,n)=>$e(t,n)>=63?50:""},{id:"einPaar",label:"Ein Paar",rule:e=>new Set(e).size!==e.length?10:0,output:(e,t,n)=>ke(e,t,n)},{id:"zweiPaar",label:"Zwei Paar",rule:e=>{let t=Re(e);return Object.values(t).filter((e=>e>=2)).length>=2?20:0},output:(e,t,n)=>ke(e,t,n)},{id:"dreierpasch",label:"Dreierpasch",rule:e=>{let t=Object.values(Re(e));return t.some((e=>e>=3))?e.reduce(((e,t)=>e+t),0):0},output:(e,t,n)=>ke(e,t,n)},{id:"viererpasch",label:"Viererpasch",rule:e=>{let t=Object.values(Re(e));return t.some((e=>e>=4))?e.reduce(((e,t)=>e+t),0):0},output:(e,t,n)=>ke(e,t,n)},{id:"fullHouse",label:"Full House",rule:e=>{let t=Object.values(Re(e));return t.some((e=>3==e))&&t.some((e=>2==e))?25:0},output:(e,t,n)=>ke(e,t,n)},{id:"kleineStraße",label:"Kleine Straße",rule:e=>/1234|2345|3456/.test([...new Set(e)].sort().join(""))?30:0,output:(e,t,n)=>ke(e,t,n)},{id:"großeStraße",label:"Große Straße",rule:e=>/12345|23456/.test([...new Set(e)].sort().join(""))?40:0,output:(e,t,n)=>ke(e,t,n)},{id:"yatzy",label:"Yatzy",rule:e=>{let t=Re(e),n=Object.keys(t).find((e=>5==t[e]));return n?50+5*Number(n):0},output:(e,t,n)=>ke(e,t,n)},{id:"chance",label:"Chance",rule:e=>e.reduce(((e,t)=>e+t),0),output:(e,t,n)=>ke(e,t,n)},{id:"total",label:"Total",style:"font-weight: bold;",output:(e,t,n)=>{let o=$e(t,n)||0,r=o>=63?50:0,a=xe(t,n)||0;return o+r+a}}]},Oe={components:{sidebar:X,yatzyTable:fe,cube:Ce},data(){return{roomData:{},activeCubes:[],countCubes:5,model:je,onRole:!1}},methods:{roleTheCube(){this.onRole=!0,setTimeout((()=>this.onRole=!1),this.$cubeSpinTime*this.$cubeSpinCount);let e=Array.from({length:this.countCubes},((e,t)=>t+1)).filter((e=>!this.activeCubes.includes(e)));this.$ws.up({action:"roleTheCube",data:e})},newRound(){this.$ws.up({action:"nextRound",data:null})},toggleCube(e){if(this.roomData.room.numberOfThrows&&this.$store.state.user.id==this.roomData.room.activeUser)if(this.activeCubes.includes(e)){let t=this.activeCubes.indexOf(e);-1!=t&&this.activeCubes.splice(t,1)}else this.activeCubes.push(e)}},watch:{"$store.state.data.room"(e){this.roomData=e}}};const Te=(0,s.Z)(Oe,[["render",A],["__scopeId","data-v-4d6da7f7"]]);var ze=Te,Ze={components:{setup:U,game:ze}};const Se=(0,s.Z)(Ze,[["render",h]]);var Ie=Se;const Pe=[{path:"/",name:"Startseite",component:Ie}],We=(0,v.p7)({history:(0,v.PO)(),routes:Pe});var Ne=We,Ee=n(65);const He=(0,Ee.MT)({state(){return{user:{},data:{setup:{},room:{},cube:{}}}},mutations:{updateUser(e,t){return e.user[t.key]=t.value},getData(e,t){e.data[t.action]=t.data}}});var Ue=He,Ve=n(8541),Be=n(3852),Ye=n(2531),Ke=n(9574),Fe=n(1826),Ae=n(6709),Me=n(1583),qe=n(606),Je=n(9870),Le=n(6823),Ge=n(1536),Qe=n(5799),Xe=n(4146);const et=(0,o.ri)(p);et.use(Ne),et.use(Ue),et.use(Be.Z),et.use(Ye.Z),et.use(Ke.Z),et.component("Button",Fe.Z),et.component("InputText",Ae.Z),et.component("InputNumber",Me.Z),et.component("Card",qe.Z),et.component("Toolbar",Je.Z),et.component("Toast",Le.Z),et.component("DynamicDialog",Ge.Z),et.component("Menu",Qe.Z),et.component("Sidebar",Xe.Z),et.use(Ve.ZP,{expireTime:"80d",secure:!0,sameSite:"lax"}),et.config.globalProperties.$cubeSpinCount=6,et.config.globalProperties.$cubeSpinTime=300,et.config.globalProperties.$ws=new WebSocket("wss://websocket.yatzy.tk-app.de"),et.mount("#app")}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,r,a){if(!o){var i=1/0;for(d=0;d<e.length;d++){o=e[d][0],r=e[d][1],a=e[d][2];for(var u=!0,s=0;s<o.length;s++)(!1&a||i>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[s])}))?o.splice(s--,1):(u=!1,a<i&&(i=a));if(u){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[o,r,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p="/"}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,a,i=o[0],u=o[1],s=o[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(r in u)n.o(u,r)&&(n.m[r]=u[r]);if(s)var d=s(n)}for(t&&t(o);l<i.length;l++)a=i[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},o=self["webpackChunktk_yatzy_frontend"]=self["webpackChunktk_yatzy_frontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(2951)}));o=n.O(o)})();
//# sourceMappingURL=app.4be59916.js.map